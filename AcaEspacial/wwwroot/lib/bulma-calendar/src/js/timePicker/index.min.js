/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/bulma-calendar@6.1.16/src/js/timePicker/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as utils from"../utils";import*as type from"../utils/type";import*as dateFns from"date-fns";import EventEmitter from"../utils/events";import template from"./templates/timepicker";import defaultOptions from"./defaultOptions";export default class timePicker extends EventEmitter{constructor(t={}){super(),this.options={...defaultOptions,...t},this._clickEvents=["click","touch"],this._supportsPassive=utils.detectSupportsPassive(),this._id=utils.uuid("timePicker"),this.node=null,this.onPreviousHourStartTimePicker=this.onPreviousHourStartTimePicker.bind(this),this.onNextHourStartTimePicker=this.onNextHourStartTimePicker.bind(this),this.onPreviousMinuteStartTimePicker=this.onPreviousMinuteStartTimePicker.bind(this),this.onNextMinuteStartTimePicker=this.onNextMinuteStartTimePicker.bind(this),this.onPreviousHourEndTimePicker=this.onPreviousHourEndTimePicker.bind(this),this.onNextHourEndTimePicker=this.onNextHourEndTimePicker.bind(this),this.onPreviousMinuteEndTimePicker=this.onPreviousMinuteEndTimePicker.bind(this),this.onNextMinuteEndTimePicker=this.onNextMinuteEndTimePicker.bind(this),this._init()}_init(){this._open=!1,this.lang=this.options.lang,this.format=this.options.format||"HH:mm",this.min=this.options.min,this.max=this.options.max,this._time={start:dateFns.startOfToday(),end:dateFns.endOfToday()},this.start=utils.newDate(this.options.startTime,this.format,"HH:mm")||dateFns.startOfToday(),this.end=this.options.isRange?utils.newDate(this.options.endTime,this.format,"HH:mm"):dateFns.endOfToday(),this._build(),this._bindEvents(),this.emit("ready",this)}_build(){this.node=document.createRange().createContextualFragment(template({locale:this.locale,isRange:this.options.isRange,editTimeManually:this.options.editTimeManually,icons:this.options.icons})),this._ui={container:this.node.firstChild,start:{container:this.node.querySelector(".timepicker-start"),hours:{container:this.node.querySelector(".timepicker-start .timepicker-hours"),input:this.node.querySelector(".timepicker-start .timepicker-hours input"),number:this.node.querySelector(".timepicker-start .timepicker-hours .timepicker-input-number"),previous:this.node.querySelector(".timepicker-start .timepicker-hours .timepicker-previous"),next:this.node.querySelector(".timepicker-start .timepicker-hours .timepicker-next")},minutes:{container:this.node.querySelector(".timepicker-start .timepicker-minutes"),input:this.node.querySelector(".timepicker-start .timepicker-minutes input"),number:this.node.querySelector(".timepicker-start .timepicker-minutes .timepicker-input-number"),previous:this.node.querySelector(".timepicker-start .timepicker-minutes .timepicker-previous"),next:this.node.querySelector(".timepicker-start .timepicker-minutes .timepicker-next")}},end:{container:this.node.querySelector(".timepicker-end"),hours:{container:this.node.querySelector(".timepicker-end .timepicker-hours"),input:this.node.querySelector(".timepicker-end .timepicker-hours input"),number:this.node.querySelector(".timepicker-end .timepicker-hours .timepicker-input-number"),previous:this.node.querySelector(".timepicker-end .timepicker-hours .timepicker-previous"),next:this.node.querySelector(".timepicker-end .timepicker-hours .timepicker-next")},minutes:{container:this.node.querySelector(".timepicker-end .timepicker-minutes"),input:this.node.querySelector(".timepicker-end .timepicker-minutes input"),number:this.node.querySelector(".timepicker-end .timepicker-minutes .timepicker-input-number"),previous:this.node.querySelector(".timepicker-end .timepicker-minutes .timepicker-previous"),next:this.node.querySelector(".timepicker-end .timepicker-minutes .timepicker-next")}}}}_bindEvents(){this._clickEvents.forEach((t=>{this._ui.start.hours.previous.addEventListener(t,this.onPreviousHourStartTimePicker),this._ui.start.hours.next.addEventListener(t,this.onNextHourStartTimePicker),this._ui.start.minutes.previous.addEventListener(t,this.onPreviousMinuteStartTimePicker),this._ui.start.minutes.next.addEventListener(t,this.onNextMinuteStartTimePicker),this.options.isRange&&(this._ui.end.hours.previous.addEventListener(t,this.onPreviousHourEndTimePicker),this._ui.end.hours.next.addEventListener(t,this.onNextHourEndTimePicker),this._ui.end.minutes.previous.addEventListener(t,this.onPreviousMinuteEndTimePicker),this._ui.end.minutes.next.addEventListener(t,this.onNextMinuteEndTimePicker))}))}_select(t,e=!0){type.isDate(t)||(t=utils.newDate(t,this.format,"HH:mm")),this.options.isRange&&(!this._isValidTime(this.start)||this._isValidTime(this.start)&&this._isValidTime(this.end))?(this.start=t,this.end=dateFns.endOfToday(),e&&this.emit("select:start",this)):this.options.isRange&&!this._isValidTime(this.end)?dateFns.isBefore(t,this.start)?(this.end=this.start,this.start=dateFns.endOfToday(),e&&this.emit("select",this)):dateFns.isAfter(t,this.start)?(this.end=t,e&&this.emit("select",this)):(this.start=t,this.end=dateFns.endOfToday(),e&&this.emit("select:start",this)):(this.start=t,this.end=dateFns.endOfToday(),e&&this.emit("select",this))}_isValidTime(t,e,i){try{return!!t&&(!!dateFns.isValid(t)&&(!e&&!i||(e&&i?dateFns.isWithinInterval(t,{start:e,end:i}):i?dateFns.isBefore(t,i)||dateFns.isEqual(t,i):dateFns.isAfter(t,e)||dateFns.isEqual(t,e))))}catch(t){return!1}}get id(){return this._id}set time(t){return type.isObject(t)&&t.start&&t.end&&(this._time=t),this}get time(){return this._time||{start:void 0,end:void 0}}set lang(t){try{this._locale=require(`date-fns/locale/${t}/index.js`)}catch(e){t="en-US",this._locale=require(`date-fns/locale/${t}/index.js`)}finally{return this._lang=t,this}}get lang(){return this._lang}get locale(){return this._locale}set start(t){return t?(t=utils.newDate(t,this.format,"HH:mm"),this._isValidTime(t,this.min,this.max)&&(this._time.start=t),this):(this._time.start=dateFns.startOfToday(),this)}get start(){return this._time.start}set end(t){return t?(t=utils.newDate(t,this.format,"HH:mm"),this._isValidTime(t,this.min,this.max)&&(this._time.end=t),this):(this._time.end=dateFns.endOfToday(),this)}get end(){return this._time.end}set min(t){return this._min=utils.newDate(t,this.format,"HH:mm"),this}get min(){return this._min}set max(t){return this._max=utils.newDate(t,this.format,"HH:mm"),this}get max(){return this._max}set format(t){return this._format=t,this}get format(){return this._format}onPreviousHourStartTimePicker(t){this._supportsPassive||t.preventDefault(),t.stopPropagation(),this.start=dateFns.subHours(this.start,1),setTimeout((()=>{this._ui.start.hours.number.classList.add("is-decrement-hide"),setTimeout((()=>{this._ui.start.hours.number.innerText=dateFns.format(this.start,"HH"),this._ui.start.hours.input.value=dateFns.format(this.start,"HH"),this._ui.start.hours.number.classList.add("is-decrement-visible"),this.emit("select",this)}),100),setTimeout((()=>{this._ui.start.hours.number.classList.remove("is-decrement-hide"),this._ui.start.hours.number.classList.remove("is-decrement-visible")}),1100)}),100)}onNextHourStartTimePicker(t){this._supportsPassive||t.preventDefault(),t.stopPropagation(),this.start=dateFns.addHours(this.start,1),setTimeout((()=>{this._ui.start.hours.number.classList.add("is-increment-hide"),setTimeout((()=>{this._ui.start.hours.number.innerText=dateFns.format(this.start,"HH"),this._ui.start.hours.input.value=dateFns.format(this.start,"HH"),this._ui.start.hours.number.classList.add("is-increment-visible"),this.emit("select",this)}),100),setTimeout((()=>{this._ui.start.hours.number.classList.remove("is-increment-hide"),this._ui.start.hours.number.classList.remove("is-increment-visible")}),1100)}),100)}onPreviousMinuteStartTimePicker(t){this._supportsPassive||t.preventDefault(),t.stopPropagation(),this.start=dateFns.subMinutes(this.start,this.options.minuteSteps),setTimeout((()=>{this._ui.start.minutes.number.classList.add("is-decrement-hide"),setTimeout((()=>{this._ui.start.minutes.number.innerText=dateFns.format(this.start,"mm"),this._ui.start.minutes.input.value=dateFns.format(this.start,"mm"),this._ui.start.minutes.number.classList.add("is-decrement-visible"),this.emit("select",this),dateFns.format(this.start,"HH")!==this._ui.start.hours.input.value&&(this._ui.start.hours.number.innerText=dateFns.format(this.start,"HH"),this._ui.start.hours.input.value=dateFns.format(this.start,"HH"),this._ui.start.hours.number.classList.add("is-decrement-visible"))}),100),setTimeout((()=>{this._ui.start.minutes.number.classList.remove("is-decrement-hide"),this._ui.start.minutes.number.classList.remove("is-decrement-visible"),this._ui.start.hours.number.classList.remove("is-decrement-hide"),this._ui.start.hours.number.classList.remove("is-decrement-visible")}),1100)}),100)}onNextMinuteStartTimePicker(t){this._supportsPassive||t.preventDefault(),t.stopPropagation(),this.start=dateFns.addMinutes(this.start,this.options.minuteSteps),setTimeout((()=>{this._ui.start.minutes.number.classList.add("is-increment-hide"),setTimeout((()=>{this._ui.start.minutes.number.innerText=dateFns.format(this.start,"mm"),this._ui.start.minutes.input.value=dateFns.format(this.start,"mm"),this._ui.start.minutes.number.classList.add("is-increment-visible"),this.emit("select",this),dateFns.format(this.start,"HH")!==this._ui.start.hours.input.value&&(this._ui.start.hours.number.innerText=dateFns.format(this.start,"HH"),this._ui.start.hours.input.value=dateFns.format(this.start,"HH"),this._ui.start.hours.number.classList.add("is-increment-visible"))}),100),setTimeout((()=>{this._ui.start.minutes.number.classList.remove("is-increment-hide"),this._ui.start.minutes.number.classList.remove("is-increment-visible"),this._ui.start.hours.number.classList.remove("is-increment-hide"),this._ui.start.hours.number.classList.remove("is-increment-visible")}),1100)}),100)}onPreviousHourEndTimePicker(t){this._supportsPassive||t.preventDefault(),t.stopPropagation(),this.end=dateFns.subHours(this.end,1),setTimeout((()=>{this._ui.end.hours.number.classList.add("is-decrement-hide"),setTimeout((()=>{this._ui.end.hours.number.innerText=dateFns.format(this.end,"HH"),this._ui.end.hours.input.value=dateFns.format(this.end,"HH"),this._ui.end.hours.number.classList.add("is-decrement-visible"),this.emit("select",this)}),100),setTimeout((()=>{this._ui.end.hours.number.classList.remove("is-decrement-hide"),this._ui.end.hours.number.classList.remove("is-decrement-visible")}),1100)}),100)}onNextHourEndTimePicker(t){this._supportsPassive||t.preventDefault(),t.stopPropagation(),this.end=dateFns.addHours(this.end,1),setTimeout((()=>{this._ui.end.hours.number.classList.add("is-increment-hide"),setTimeout((()=>{this._ui.end.hours.number.innerText=dateFns.format(this.end,"HH"),this._ui.end.hours.input.value=dateFns.format(this.end,"HH"),this._ui.end.hours.number.classList.add("is-increment-visible"),this.emit("select",this)}),100),setTimeout((()=>{this._ui.end.hours.number.classList.remove("is-increment-hide"),this._ui.end.hours.number.classList.remove("is-increment-visible")}),1100)}),100)}onPreviousMinuteEndTimePicker(t){this._supportsPassive||t.preventDefault(),t.stopPropagation(),this.end=dateFns.subMinutes(this.end,this.options.minuteSteps),setTimeout((()=>{this._ui.end.minutes.number.classList.add("is-decrement-hide"),setTimeout((()=>{this._ui.end.minutes.number.innerText=dateFns.format(this.end,"mm"),this._ui.end.minutes.input.value=dateFns.format(this.end,"mm"),this._ui.end.minutes.number.classList.add("is-decrement-visible"),this.emit("select",this),dateFns.format(this.end,"HH")!==this._ui.end.hours.input.value&&(this._ui.end.hours.number.innerText=dateFns.format(this.end,"HH"),this._ui.end.hours.input.value=dateFns.format(this.end,"HH"),this._ui.end.hours.number.classList.add("is-decrement-visible"))}),100),setTimeout((()=>{this._ui.end.minutes.number.classList.remove("is-decrement-hide"),this._ui.end.minutes.number.classList.remove("is-decrement-visible")}),1100)}),100)}onNextMinuteEndTimePicker(t){this._supportsPassive||t.preventDefault(),t.stopPropagation(),this.end=dateFns.addMinutes(this.end,this.options.minuteSteps),setTimeout((()=>{this._ui.end.minutes.number.classList.add("is-increment-hide"),setTimeout((()=>{this._ui.end.minutes.number.innerText=dateFns.format(this.end,"mm"),this._ui.end.minutes.input.value=dateFns.format(this.end,"mm"),this._ui.end.minutes.number.classList.add("is-increment-visible"),this.emit("select",this),dateFns.format(this.end,"HH")!==this._ui.end.hours.input.value&&(this._ui.end.hours.number.innerText=dateFns.format(this.end,"HH"),this._ui.end.hours.input.value=dateFns.format(this.end,"HH"),this._ui.end.hours.number.classList.add("is-increment-visible"))}),100),setTimeout((()=>{this._ui.end.minutes.number.classList.remove("is-increment-hide"),this._ui.end.minutes.number.classList.remove("is-increment-visible")}),1100)}),100)}isRange(){return this.options.isRange}show(){this._open||(this._ui.container.classList.add("is-active"),this._open=!0,this._focus=!0,this.emit("show",this))}hide(){this._open=!1,this._focus=!1,this._ui.container.classList.remove("is-active"),this.emit("hide",this)}toggle(){this._open?this.hide():this.show()}value(t=null){if(t)return this.options.isRange?(type.isString(t)&&(t=t.split(" - ")),Array.isArray(t)&&(t.length&&(this.start=utils.newDate(t[0],this.format,"yyyy-MM-dd")),2===t.length&&(this.end=utils.newDate(t[1],this.format,"yyyy-MM-dd")))):this._select(t,!1),void this.refresh();let e=this._isValidTime(this.start)?dateFns.format(this.start,this.format,{locale:this.locale}):"";return this.options.isRange&&this._isValidTime(this.end)&&(e+=` - ${dateFns.format(this.end,this.format,{locale:this.locale})}`),e}refresh(){return this._ui.start.hours.input.value=dateFns.format(this.start,"HH"),this._ui.start.hours.number.innerText=dateFns.format(this.start,"HH"),this._ui.start.minutes.input.value=dateFns.format(this.start,"mm"),this._ui.start.minutes.number.innerText=dateFns.format(this.start,"mm"),this.options.isRange&&(this._ui.end.hours.input.value=dateFns.format(this.end,"HH"),this._ui.end.hours.number.innerText=dateFns.format(this.end,"HH"),this._ui.end.minutes.input.value=dateFns.format(this.end,"mm"),this._ui.end.minutes.number.innerText=dateFns.format(this.end,"mm")),this}clear(){this.time={start:dateFns.startOfToday(),end:dateFns.endOfToday()},this.refresh()}render(){return this.refresh(),this.node}}
//# sourceMappingURL=/sm/ae957929bb4b24919ca19e2743909bb09090c183e8b660e4906d37684a885a78.map