/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/bulma-calendar@6.1.16/src/js/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as utils from"./utils/index";import*as type from"./utils/type";import*as dateFns from"date-fns";import EventEmitter from"./utils/events";import datePicker from"./datePicker";import timePicker from"./timePicker";import defaultOptions from"./defaultOptions";import template from"./templates";import templateselection from"./templates/header";import templateFooter from"./templates/footer";export default class bulmaCalendar extends EventEmitter{constructor(e,t={}){if(super(),this.element=type.isString(e)?document.querySelector(e):e,!this.element)throw new Error("An invalid selector or non-DOM node has been provided.");this._clickEvents=["click","touch"],this._supportsPassive=utils.detectSupportsPassive();const i=this.element.dataset?Object.keys(this.element.dataset).filter((e=>Object.keys(defaultOptions).includes(e))).reduce(((e,t)=>({...e,[t]:this.element.dataset[t]})),{}):{};if(this.options={...defaultOptions,...t,...i},void 0===this.options.type)switch(this.element.getAttribute("type")){case"date":this.options.type="date";break;case"time":this.options.type="time";break;default:this.options.type="datetime"}this._id=utils.uuid("datetimePicker"),this.onToggleDateTimePicker=this.onToggleDateTimePicker.bind(this),this.onCloseDateTimePicker=this.onCloseDateTimePicker.bind(this),this.onDocumentClickDateTimePicker=this.onDocumentClickDateTimePicker.bind(this),this.onValidateClickDateTimePicker=this.onValidateClickDateTimePicker.bind(this),this.onTodayClickDateTimePicker=this.onTodayClickDateTimePicker.bind(this),this.onClearClickDateTimePicker=this.onClearClickDateTimePicker.bind(this),this.onCancelClickDateTimePicker=this.onCancelClickDateTimePicker.bind(this),this.onSelectDateTimePicker=this.onSelectDateTimePicker.bind(this),this.onChangeStartHoursManually=this.onChangeStartHoursManually.bind(this),this.onChangeStartMinutesManually=this.onChangeStartMinutesManually.bind(this),this.onChangeEndHoursManually=this.onChangeEndHoursManually.bind(this),this.onChangeEndMinutesManually=this.onChangeEndMinutesManually.bind(this),this.element.required,this._init()}static attach(e='input[type="date"]',t={}){let i=[];const s=type.isString(e)?document.querySelectorAll(e):Array.isArray(e)?e:[e];return[].forEach.call(s,(e=>{if(void 0===e[this.constructor.name]){const s=new bulmaCalendar(e,t);e.bulmaCalendar=s,i.push(s)}else i.push(e[this.constructor.name])})),i}get id(){return this._id}set lang(e){try{this._locale=require(`date-fns/locale/${e}/index.js`)}catch(t){e="en-US",this._locale=require(`date-fns/locale/${e}/index.js`)}finally{return this._lang=e,this.datePicker.lang=e,this.timePicker.lang=e,this}}get lang(){return this._lang}get locale(){return this._locale}set format(e){return this._format=e,this}get format(){return this._format}set date(e){return this.datePicker.date=e,this}get date(){return this.datePicker.date}set startDate(e){return this.datePicker.start=e,this}get startDate(){return this.datePicker.start}set endDate(e){return this.datePicker.end=e,this}get endDate(){return this.datePicker.end}set minDate(e){return this.datePicker.minDate=e,this}get minDate(){return this.datePicker.minDate}set maxDate(e){return this.datePicker.maxDate=e,this}get maxDate(){return this.datePicker.maxDate}set dateFormat(e){return this.datePicker.dateFormat=e,this}get dateFormat(){return this.datePicker.dateFormat}set time(e){return this.timePicker.time=e,this}get time(){return this.timePicker.time}set startTime(e){return this.timePicker.start=e,this}get startTime(){return this.timePicker.start}set endTime(e){return this.timePicker.end=e,this}get endTime(){return this.timePicker.end}set minTime(e){return this.timePicker.minTime=e,this}get minTime(){return this.timePicker.minTime}set maxTime(e){return this.timePicker.maxTime=e,this}get maxTime(){return this.timePicker.maxTime}set timeFormat(e){return this.timePicker.dateFormat=e,this}get timeFormat(){return this.timePicker.timeFormat}onSelectDateTimePicker(e){this.refresh(),this.emit(e.type,this),"select"===e.type&&this.options.closeOnSelect&&this.save()}onDocumentClickDateTimePicker(e){const t=e.target||e.srcElement;this._ui.wrapper.contains(t)||"inline"===this.options.displayMode||this.hide()}onToggleDateTimePicker(e){this._supportsPassive||e.preventDefault(),e.stopPropagation(),this.toggle()}onValidateClickDateTimePicker(e){this._supportsPassive||e.preventDefault(),e.stopPropagation(),this.emit("validate",this),type.isFunction(this.options.onValidate)||this.save()}onTodayClickDateTimePicker(e){this._supportsPassive||e.preventDefault(),e.stopPropagation(),this.datePicker.value(new Date),this.timePicker.value(new Date),this.refresh(),this.options.closeOnSelect&&this.save()}onClearClickDateTimePicker(e){this._supportsPassive||e.preventDefault(),e.stopPropagation(),this.clear(),this.isOpen()&&!this.options.closeOnSelect||this.save()}onCancelClickDateTimePicker(e){this._supportsPassive||e.preventDefault(),e.stopPropagation(),this.value(this.element.value),this.refresh(),this.save()}onCloseDateTimePicker(e){this._supportsPassive||e.preventDefault(),e.stopPropagation(),this.hide()}onClickTimeManuallyInput(e){e.currentTarget.select()}onChangeStartHoursManually(e){this.timePicker.start.setHours(e.currentTarget.value),this.refresh(),this.options.closeOnSelect&&this.save()}onChangeStartMinutesManually(e){this.timePicker.start.setMinutes(e.currentTarget.value),this.refresh(),this.options.closeOnSelect&&this.save()}onChangeEndHoursManually(e){this.timePicker.end.setHours(e.currentTarget.value),this.refresh(),this.options.closeOnSelect&&this.save()}onChangeEndMinutesManually(e){this.timePicker.end.setMinutes(e.currentTarget.value),this.refresh(),this.options.closeOnSelect&&this.save()}isRange(){return this.options.isRange}isOpen(){return this._open}value(e=null){if(e)return"datetime"==this.options.type&&(this.options.isRange?(type.isString(e)&&(e=e.split(" - ")),Array.isArray(e)&&(e.length&&(e[0]=utils.newDate(e[0],this.format)),2===e.length&&(e[1]=utils.newDate(e[1],this.format)))):type.isString(e)&&(e=utils.newDate(e,this.format))),this.datePicker.value(e),this.timePicker.value(e),this._refreshInput(),void this.refresh();let t="";switch(this.options.type){case"date":t=this.datePicker.value();break;case"time":t=this.timePicker.value();break;case"datetime":let e=this.datePicker.start,i=this.datePicker.end;e&&this.timePicker.start&&(e.setHours(this.timePicker.start.getHours()),e.setMinutes(this.timePicker.start.getMinutes()),t=dateFns.format(e,this.format,{locale:this.locale})),this.options.isRange&&(i&&this.timePicker.end&&(i.setHours(this.timePicker.end.getHours()),i.setMinutes(this.timePicker.end.getMinutes())),t+=` - ${i?dateFns.format(i,this.format,{locale:this.locale}):""}`)}return t}refresh(){this._ui.header.start.day.innerHTML=this.datePicker.start?dateFns.format(this.datePicker.start,"dd",{locale:this.locale}):"--",this._ui.header.start.month.innerHTML=this.datePicker.start?dateFns.format(this.datePicker.start,this.options.formats.header,{locale:this.locale}):"",this.datePicker.start?(this._ui.header.start.weekday.classList.remove("is-hidden"),this._ui.header.start.weekday.innerHTML=this.datePicker.start?dateFns.format(this.datePicker.start,"EEEE",{locale:this.locale}):""):this._ui.header.start.weekday.classList.add("is-hidden"),this._ui.header.start.hour&&(this.options.editTimeManually?(this._ui.header.start.inputHours.value=this.timePicker.start?dateFns.format(this.timePicker.start,"HH",{locale:this.locale}):"--",this._ui.header.start.inputMinutes.value=this.timePicker.start?dateFns.format(this.timePicker.start,"mm",{locale:this.locale}):"--"):this._ui.header.start.hour.innerHTML=this.timePicker.start?dateFns.format(this.timePicker.start,"HH:mm",{locale:this.locale}):"--:--"),this._ui.header.end&&(this._ui.header.end.day.innerHTML=this.options.isRange&&this.datePicker.end?dateFns.format(this.datePicker.end,"dd",{locale:this.locale}):"--",this._ui.header.end.month.innerHTML=this.options.isRange&&this.datePicker.end?dateFns.format(this.datePicker.end,this.options.formats.header,{locale:this.locale}):"",this.datePicker.end?(this._ui.header.end.weekday.classList.remove("is-hidden"),this._ui.header.end.weekday.innerHTML=this.datePicker.end?dateFns.format(this.datePicker.end,"EEEE",{locale:this.locale}):""):this._ui.header.end.weekday.classList.add("is-hidden"),this._ui.header.end&&this._ui.header.end.hour&&(this.options.editTimeManually?(this._ui.header.end.inputHours.value=this.timePicker.end?dateFns.format(this.timePicker.end,"HH",{locale:this.locale}):"--",this._ui.header.end.inputMinutes.value=this.timePicker.end?dateFns.format(this.timePicker.end,"mm",{locale:this.locale}):"--"):this._ui.header.end.hour.innerHTML=this.timePicker.end?dateFns.format(this.timePicker.end,"HH:mm",{locale:this.locale}):"--:--")),this.emit("refresh",this)}clear(){this.datePicker.clear(),this.timePicker.clear(),this.refresh(),this.isOpen()||this._refreshInput(),this.emit("clear",this)}show(){this.datePicker.show(),this.timePicker.show(),this._ui.modal&&this._ui.modal.classList.add("is-active"),this._ui.dummy.wrapper.classList.add("is-active"),this._ui.wrapper.classList.add("is-active"),this._open=!0,this.emit("show",this)}toggle(){this._open?this.hide():this.show()}hide(){this._open&&(this.datePicker.hide(),this.timePicker.hide(),this._open=!1,this._focus=!1,this._ui.modal&&this._ui.modal.classList.remove("is-active"),this._ui.dummy.wrapper.classList.remove("is-active"),this._ui.wrapper.classList.remove("is-active"),this.emit("hide",this))}save(){this._refreshInput(),"inline"!==this.options.displayMode&&this.hide(),this.emit("save",this)}destroy(){document.getElementById(this.id).remove(),this.datePicker=null,this.timePicker=null,this._ui=null}_init(){this._open=!1,this._type=["date","time","datetime"].indexOf(this.options.type.toLowerCase())>-1?this.options.type.toLowerCase():"date",this.element.setAttribute("type","text"),this.datePicker=new datePicker({...this.options}),this.timePicker=new timePicker({...this.options}),this.lang=this.options.lang,this.format="date"===this._type?this.options.dateFormat:"time"===this._type?this.options.timeFormat:`${this.options.dateFormat} ${this.options.timeFormat}`,"default"===this.options.displayMode&&window.matchMedia("screen and (max-width: 768px)").matches&&(this.options.displayMode="dialog"),window.matchMedia("screen and (max-width: 768px)").matches&&("default"===this.options.displayMode&&(this.options.displayMode="dialog"),this.options.displayDual=!1),this._build(),this._bindEvents(),this.element.value&&this.value(this.element.value),this._refreshInput(),type.isFunction(this.options.onReady)&&this.on("ready",this.options.onReady),type.isFunction(this.options.onValidate)&&this.on("validate",this.options.onValidate),this.emit("ready",this)}_build(){const e=document.createRange().createContextualFragment(templateselection({...this.options,type:this._type,datePicker:"time"!==this.options.type,timePicker:"date"!==this.options.type})),t=document.createRange().createContextualFragment(templateFooter(this.options)),i=document.createRange().createContextualFragment(template({...this.options,id:this.id}));switch(this._ui={modal:i.querySelector(".datetimepicker-wrapper.modal"),wrapper:i.querySelector(".datetimepicker"),container:i.querySelector(".datetimepicker-container"),dummy:{container:i.querySelector(".datetimepicker-dummy"),wrapper:i.querySelector(".datetimepicker-dummy-wrapper"),dummy_1:i.querySelector(".datetimepicker-dummy .datetimepicker-dummy-input:nth-child(1)"),dummy_2:i.querySelector(".datetimepicker-dummy .datetimepicker-dummy-input:nth-child(2)"),clear:i.querySelector(".datetimepicker-dummy .datetimepicker-clear-button")},calendar:i.querySelector(".datetimepicker"),overlay:"dialog"===this.options.displayMode?{background:i.querySelector(".modal-background"),close:i.querySelector(".modal-close")}:void 0,header:{container:e.querySelector(".datetimepicker-header"),start:{container:e.querySelector(".datetimepicker-selection-start"),day:e.querySelector(".datetimepicker-selection-start .datetimepicker-selection-day"),month:e.querySelector(".datetimepicker-selection-start .datetimepicker-selection-month"),weekday:e.querySelector(".datetimepicker-selection-start .datetimepicker-selection-weekday"),hour:e.querySelector(".datetimepicker-selection-start .datetimepicker-selection-hour"),inputHours:e.querySelector(".datetimepicker-selection-start .datetimepicker-selection-hour.editable .datetimepicker-selection-input-hours"),inputMinutes:e.querySelector(".datetimepicker-selection-start .datetimepicker-selection-hour.editable .datetimepicker-selection-input-minutes"),empty:e.querySelector(".datetimepicker-selection-start .empty")},end:this.options.isRange?{container:e.querySelector(".datetimepicker-selection-end"),day:e.querySelector(".datetimepicker-selection-end .datetimepicker-selection-day"),month:e.querySelector(".datetimepicker-selection-end .datetimepicker-selection-month"),weekday:e.querySelector(".datetimepicker-selection-end .datetimepicker-selection-weekday"),hour:e.querySelector(".datetimepicker-selection-end .datetimepicker-selection-hour"),inputHours:e.querySelector(".datetimepicker-selection-end .datetimepicker-selection-hour.editable .datetimepicker-selection-input-hours"),inputMinutes:e.querySelector(".datetimepicker-selection-end .datetimepicker-selection-hour.editable .datetimepicker-selection-input-minutes"),empty:e.querySelector(".datetimepicker-selection-start .empty")}:void 0},footer:{container:t.querySelector(".datetimepicker-footer"),validate:t.querySelector(".datetimepicker-footer-validate"),today:t.querySelector(".datetimepicker-footer-today"),clear:t.querySelector(".datetimepicker-footer-clear"),cancel:t.querySelector(".datetimepicker-footer-cancel")}},type.BooleanParse(this.options.showHeader)||this._ui.header.container.classList.add("is-hidden"),type.BooleanParse(this.options.showFooter)||this._ui.footer.container.classList.add("is-hidden"),type.BooleanParse(this.options.showTodayButton)||this._ui.footer.today.classList.add("is-hidden"),type.BooleanParse(this.options.showClearButton)||this._ui.footer.clear.classList.add("is-hidden"),this.options.closeOnSelect&&this._ui.footer.validate&&this._ui.footer.validate.classList.add("is-hidden"),this._ui.container.appendChild(e),this._type){case"date":this._ui.container.appendChild(this.datePicker.render());break;case"time":this.options.closeOnSelect=!1,this._ui.container.appendChild(this.timePicker.render()),(this.options.labelFrom||this.options.labelTo)&&this._ui.header.container.classList.remove("is-hidden"),this._ui.footer.validate&&this._ui.footer.validate.classList.remove("is-hidden"),this._ui.footer.today&&this._ui.footer.today.classList.add("is-hidden");break;case"datetime":this.options.closeOnSelect=!1,this._ui.footer.validate&&this._ui.footer.validate.classList.remove("is-hidden"),this._ui.container.appendChild(this.datePicker.render()),this._ui.container.appendChild(this.timePicker.render())}this._ui.wrapper.appendChild(t),this._ui.wrapper.classList.add(`is-${this.options.color}`),this._ui.dummy.container.classList.add(`is-${this.options.color}`),this.element.parentNode.insertBefore(i,this.element.nextSibling),this._ui.dummy.wrapper.appendChild(this.element),this.element.classList.add("is-hidden"),"inline"===this.options.displayMode?this._ui.wrapper.classList.add("is-active"):(this._ui.dummy.container.classList.remove("is-hidden"),this._ui.wrapper.style.position="absolute",this._ui.wrapper.classList.add("is-datetimepicker-default")),this.refresh()}_bindEvents(){this._clickEvents.forEach((e=>{document.body.addEventListener(e,this.onDocumentClickDateTimePicker)})),this.datePicker.on("select",this.onSelectDateTimePicker),this.datePicker.on("select:start",this.onSelectDateTimePicker),this.timePicker.on("select",this.onSelectDateTimePicker),this.timePicker.on("select:start",this.onSelectDateTimePicker),!0===this.options.toggleOnInputClick&&this._clickEvents.forEach((e=>{this._ui.dummy.wrapper.addEventListener(e,this.onToggleDateTimePicker),this.element.addEventListener(e,this.onToggleDateTimePicker)})),"date"!==this.options.type&&this.options.editTimeManually&&(this._ui.header.start.inputHours.addEventListener("change",this.onChangeStartHoursManually),this._ui.header.start.inputHours.addEventListener("click",this.onClickTimeManuallyInput),this._ui.header.start.inputMinutes.addEventListener("change",this.onChangeStartMinutesManually),this._ui.header.start.inputMinutes.addEventListener("click",this.onClickTimeManuallyInput),this.options.isRange&&(this._ui.header.end.inputHours.addEventListener("change",this.onChangeEndHoursManually),this._ui.header.end.inputHours.addEventListener("click",this.onClickTimeManuallyInput),this._ui.header.end.inputMinutes.addEventListener("change",this.onChangeEndMinutesManually),this._ui.header.end.inputMinutes.addEventListener("click",this.onClickTimeManuallyInput))),"dialog"===this.options.displayMode&&this._ui.overlay&&(this._ui.overlay.close&&this._clickEvents.forEach((e=>{this.this._ui.overlay.close.addEventListener(e,this.onCloseDateTimePicker)})),this.options.closeOnOverlayClick&&this._ui.overlay.background&&this._clickEvents.forEach((e=>{this._ui.overlay.background.addEventListener(e,this.onCloseDateTimePicker)}))),this._ui.footer.validate&&this._clickEvents.forEach((e=>{this._ui.footer.validate.addEventListener(e,this.onValidateClickDateTimePicker)})),this._ui.footer.today&&this._clickEvents.forEach((e=>{this._ui.footer.today.addEventListener(e,this.onTodayClickDateTimePicker)})),this._ui.footer.clear&&this._clickEvents.forEach((e=>{this._ui.footer.clear.addEventListener(e,this.onClearClickDateTimePicker)})),this._clickEvents.forEach((e=>{this._ui.dummy.clear.addEventListener(e,this.onClearClickDateTimePicker)})),this._ui.footer.cancel&&this._clickEvents.forEach((e=>{this._ui.footer.cancel.addEventListener(e,this.onCancelClickDateTimePicker)}))}_refreshInput(){const[e,t]=this.value().split(" - ");this._ui.dummy.dummy_1.value=e||"",this._ui.dummy.dummy_2&&(this._ui.dummy.dummy_2.value=t||""),this.element.setAttribute("value",this.value())}}
//# sourceMappingURL=/sm/8934d9a22af01abf71bf7c36d9f6f9644b0d5370a168459ab2897d9fa27e7765.map